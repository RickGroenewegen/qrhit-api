<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Music Bingo Host Cards - QRSong!</title>
<style>
    @media print {
        @page {
            size: A4;
            margin: 0;
        }
        body {
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
        .page {
            page-break-after: always;
        }
        .page:last-child {
            page-break-after: auto;
        }
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #ffffff;
    }

    .page {
        width: 210mm;
        height: 297mm;
        padding: 10mm;
        display: flex;
        flex-wrap: wrap;
        align-content: flex-start;
        gap: 3mm;
    }

    .host-card {
        width: 45mm;
        height: 53mm;
        border: 1.5px solid #2563eb;
        border-radius: 4px;
        display: flex;
        flex-direction: column;
        background: #ffffff;
        overflow: hidden;
    }

    .host-card .qr-section {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 2mm;
        background: #f8fafc;
    }

    .host-card .qr-section img {
        width: 28mm;
        height: 28mm;
        object-fit: contain;
    }

    .host-card .info-section {
        background: #2563eb;
        color: white;
        padding: 2mm 2.5mm;
        text-align: center;
    }

    .host-card .song-title {
        font-size: 10px;
        font-weight: 600;
        line-height: 1.2;
        max-height: 2.4em;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        margin-bottom: 0.5mm;
    }

    .host-card .artist {
        font-size: 9px;
        opacity: 0.9;
        line-height: 1.2;
        max-height: 1.2em;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    .host-card .year {
        font-size: 12px;
        font-weight: 700;
        margin-top: 0.5mm;
    }
</style>
</head>
<body>
<%
const cardsPerPage = 20; // 4 columns x 5 rows
const totalPages = Math.ceil(tracks.length / cardsPerPage);

for (let page = 0; page < totalPages; page++) {
    const startIdx = page * cardsPerPage;
    const endIdx = Math.min(startIdx + cardsPerPage, tracks.length);
    const pageCards = tracks.slice(startIdx, endIdx);
%>
<div class="page">
    <% pageCards.forEach(function(track) { %>
    <div class="host-card">
        <div class="qr-section">
            <img src="<%= track.qrUrl %>" alt="QR Code">
        </div>
        <div class="info-section">
            <div class="song-title"><%= track.name %></div>
            <div class="artist"><%= track.artist %></div>
            <div class="year"><%= track.year %></div>
        </div>
    </div>
    <% }); %>
</div>
<% } %>
</body>
</html>
